{"version":3,"file":"nivo-heatmap.cjs.js","sources":["../src/HeatMapTooltip.tsx","../src/defaults.ts","../src/compute.ts","../src/hooks.ts","../src/HeatMapCellRect.tsx","../src/HeatMapCellCircle.tsx","../src/HeatMapCells.tsx","../src/HeatMapCellAnnotations.tsx","../src/HeatMap.tsx","../src/ResponsiveHeatMap.tsx","../src/canvas.tsx","../src/HeatMapCanvas.tsx","../src/ResponsiveHeatMapCanvas.tsx"],"sourcesContent":["import { memo } from 'react'\nimport { BasicTooltip } from '@nivo/tooltip'\nimport { HeatMapDatum, TooltipProps } from './types'\n\nconst NonMemoizedHeatMapTooltip = <Datum extends HeatMapDatum>({ cell }: TooltipProps<Datum>) => {\n    if (cell.formattedValue === null) return null\n\n    return (\n        <BasicTooltip\n            id={`${cell.serieId} - ${cell.data.x}`}\n            value={cell.formattedValue}\n            enableChip={true}\n            color={cell.color}\n        />\n    )\n}\n\nexport const HeatMapTooltip = memo(NonMemoizedHeatMapTooltip) as typeof NonMemoizedHeatMapTooltip\n","import { DefaultHeatMapDatum, HeatMapCommonProps, LayerId } from './types'\nimport { HeatMapTooltip } from './HeatMapTooltip'\n\nexport const commonDefaultProps: Omit<\n    HeatMapCommonProps<DefaultHeatMapDatum>,\n    | 'margin'\n    | 'theme'\n    | 'valueFormat'\n    | 'onClick'\n    | 'renderWrapper'\n    | 'role'\n    | 'ariaLabel'\n    | 'ariaLabelledBy'\n    | 'ariaDescribedBy'\n> & {\n    layers: LayerId[]\n} = {\n    layers: ['grid', 'axes', 'cells', 'legends', 'annotations'],\n\n    forceSquare: false,\n    xInnerPadding: 0,\n    xOuterPadding: 0,\n    yInnerPadding: 0,\n    yOuterPadding: 0,\n    sizeVariation: false,\n\n    opacity: 1,\n    activeOpacity: 1,\n    inactiveOpacity: 0.15,\n    borderWidth: 0,\n    borderColor: { from: 'color', modifiers: [['darker', 0.8]] },\n\n    enableGridX: false,\n    enableGridY: false,\n\n    enableLabels: true,\n    label: 'formattedValue',\n    labelTextColor: { from: 'color', modifiers: [['darker', 2]] },\n\n    colors: {\n        type: 'sequential',\n        scheme: 'brown_blueGreen',\n    },\n    emptyColor: '#000000',\n\n    legends: [],\n    annotations: [],\n\n    isInteractive: true,\n    hoverTarget: 'rowColumn',\n    tooltip: HeatMapTooltip,\n\n    animate: true,\n    motionConfig: 'gentle' as const,\n}\n\nexport const svgDefaultProps = {\n    ...commonDefaultProps,\n    axisTop: {},\n    axisRight: null,\n    axisBottom: null,\n    axisLeft: {},\n    borderRadius: 0,\n    cellComponent: 'rect' as const,\n}\n\nexport const canvasDefaultProps = {\n    ...commonDefaultProps,\n    axisTop: {},\n    axisRight: null,\n    axisBottom: null,\n    axisLeft: {},\n    renderCell: 'rect' as const,\n    pixelRatio: typeof window !== 'undefined' ? window.devicePixelRatio || 1 : 1,\n}\n","import { scaleBand, scaleLinear } from 'd3-scale'\nimport { castBandScale } from '@nivo/scales'\nimport {\n    ComputedCell,\n    HeatMapCommonProps,\n    HeatMapDataProps,\n    HeatMapDatum,\n    SizeVariationConfig,\n} from './types'\n\nexport const computeLayout = ({\n    width: _width,\n    height: _height,\n    rows,\n    columns,\n    forceSquare,\n}: {\n    width: number\n    height: number\n    rows: number\n    columns: number\n    forceSquare: boolean\n}) => {\n    let width = _width\n    let height = _height\n\n    let offsetX = 0\n    let offsetY = 0\n\n    if (forceSquare) {\n        const cellWidth = Math.max(_width / columns, 0)\n        const cellHeight = Math.max(_height / rows, 0)\n        const cellSize = Math.min(cellWidth, cellHeight)\n\n        width = cellSize * columns\n        height = cellSize * rows\n\n        offsetX = (_width - width) / 2\n        offsetY = (_height - height) / 2\n    }\n\n    return {\n        offsetX,\n        offsetY,\n        width,\n        height,\n    }\n}\n\nexport const computeCells = <Datum extends HeatMapDatum, ExtraProps extends object>({\n    data,\n    width: _width,\n    height: _height,\n    xInnerPadding,\n    xOuterPadding,\n    yInnerPadding,\n    yOuterPadding,\n    forceSquare,\n}: {\n    data: HeatMapDataProps<Datum, ExtraProps>['data']\n    width: number\n    height: number\n} & Pick<\n    HeatMapCommonProps<Datum>,\n    'xOuterPadding' | 'xInnerPadding' | 'yOuterPadding' | 'yInnerPadding' | 'forceSquare'\n>) => {\n    const xValuesSet = new Set<Datum['x']>()\n    const serieIds: string[] = []\n    const allValues: number[] = []\n\n    const cells: Pick<ComputedCell<Datum>, 'id' | 'serieId' | 'value' | 'data'>[] = []\n\n    data.forEach(serie => {\n        serieIds.push(serie.id)\n\n        serie.data.forEach(datum => {\n            xValuesSet.add(datum.x)\n\n            let value: number | null = null\n            if (datum.y !== undefined && datum.y !== null) {\n                allValues.push(datum.y)\n                value = datum.y\n            }\n\n            cells.push({\n                id: `${serie.id}.${datum.x}`,\n                serieId: serie.id,\n                value,\n                data: datum,\n            })\n        })\n    })\n\n    const xValues = Array.from(xValuesSet)\n\n    const { width, height, offsetX, offsetY } = computeLayout({\n        width: _width,\n        height: _height,\n        columns: xValues.length,\n        rows: serieIds.length,\n        forceSquare,\n    })\n\n    const xScale = castBandScale<Datum['x']>(\n        scaleBand<Datum['x']>()\n            .domain(xValues)\n            .range([0, width])\n            .paddingOuter(xOuterPadding)\n            .paddingInner(xInnerPadding)\n    )\n\n    const yScale = castBandScale<string>(\n        scaleBand<string>()\n            .domain(serieIds)\n            .range([0, height])\n            .paddingOuter(yOuterPadding)\n            .paddingInner(yInnerPadding)\n    )\n\n    const cellWidth = xScale.bandwidth()\n    const cellHeight = yScale.bandwidth()\n\n    const cellsWithPosition: Omit<\n        ComputedCell<Datum>,\n        'formattedValue' | 'color' | 'opacity' | 'borderColor' | 'label' | 'labelTextColor'\n    >[] = cells.map(cell => ({\n        ...cell,\n        x: xScale(cell.data.x)! + cellWidth / 2,\n        y: yScale(cell.serieId)! + cellHeight / 2,\n        width: cellWidth,\n        height: cellHeight,\n    }))\n\n    return {\n        width,\n        height,\n        offsetX,\n        offsetY,\n        xScale,\n        yScale,\n        minValue: Math.min(...allValues),\n        maxValue: Math.max(...allValues),\n        cells: cellsWithPosition,\n    }\n}\n\nexport const computeSizeScale = (\n    size: false | SizeVariationConfig,\n    min: number,\n    max: number\n): ((value: number | null) => number) => {\n    if (!size) return () => 1\n\n    const scale = scaleLinear()\n        .domain(size.values ? size.values : [min, max])\n        .range(size.sizes)\n\n    return (value: number | null) => {\n        if (value === null) return 1\n        return scale(value)\n    }\n}\n\nexport const getCellAnnotationPosition = <Datum extends HeatMapDatum>(\n    cell: ComputedCell<Datum>\n) => ({\n    x: cell.x,\n    y: cell.y,\n})\n\nexport const getCellAnnotationDimensions = <Datum extends HeatMapDatum>(\n    cell: ComputedCell<Datum>\n) => ({\n    size: Math.max(cell.width, cell.height),\n    width: cell.width,\n    height: cell.height,\n})\n","import { useMemo, useCallback, useState } from 'react'\nimport { usePropertyAccessor, useValueFormatter } from '@nivo/core'\nimport { useTheme } from '@nivo/theming'\nimport { useInheritedColor, getContinuousColorScale } from '@nivo/colors'\nimport { AnnotationMatcher, useAnnotations } from '@nivo/annotations'\nimport {\n    ComputedCell,\n    DefaultHeatMapDatum,\n    HeatMapCommonProps,\n    HeatMapDataProps,\n    HeatMapDatum,\n    SizeVariationConfig,\n} from './types'\nimport { commonDefaultProps } from './defaults'\nimport {\n    computeCells,\n    computeSizeScale,\n    getCellAnnotationPosition,\n    getCellAnnotationDimensions,\n} from './compute'\n\nexport const useComputeCells = <Datum extends HeatMapDatum, ExtraProps extends object>({\n    data,\n    width,\n    height,\n    xInnerPadding,\n    xOuterPadding,\n    yInnerPadding,\n    yOuterPadding,\n    forceSquare,\n}: {\n    data: HeatMapDataProps<Datum, ExtraProps>['data']\n    width: number\n    height: number\n} & Pick<\n    HeatMapCommonProps<Datum>,\n    'xOuterPadding' | 'xInnerPadding' | 'yOuterPadding' | 'yInnerPadding' | 'forceSquare'\n>) =>\n    useMemo(\n        () =>\n            computeCells<Datum, ExtraProps>({\n                data,\n                width,\n                height,\n                xInnerPadding,\n                xOuterPadding,\n                yInnerPadding,\n                yOuterPadding,\n                forceSquare,\n            }),\n        [\n            data,\n            width,\n            height,\n            xInnerPadding,\n            xOuterPadding,\n            yInnerPadding,\n            yOuterPadding,\n            forceSquare,\n        ]\n    )\n\nconst isHoverTargetByType = {\n    cell: <Datum extends HeatMapDatum>(\n        cell: Omit<\n            ComputedCell<Datum>,\n            'formattedValue' | 'color' | 'opacity' | 'borderColor' | 'label' | 'labelTextColor'\n        >,\n        current: ComputedCell<Datum>\n    ) => cell.id === current.id,\n    row: <Datum extends HeatMapDatum>(\n        cell: Omit<\n            ComputedCell<Datum>,\n            'formattedValue' | 'color' | 'opacity' | 'borderColor' | 'label' | 'labelTextColor'\n        >,\n        current: ComputedCell<Datum>\n    ) => cell.serieId === current.serieId,\n    column: <Datum extends HeatMapDatum>(\n        cell: Omit<\n            ComputedCell<Datum>,\n            'formattedValue' | 'color' | 'opacity' | 'borderColor' | 'label' | 'labelTextColor'\n        >,\n        current: ComputedCell<Datum>\n    ) => cell.data.x === current.data.x,\n    rowColumn: <Datum extends HeatMapDatum>(\n        cell: Omit<\n            ComputedCell<Datum>,\n            'formattedValue' | 'color' | 'opacity' | 'borderColor' | 'label' | 'labelTextColor'\n        >,\n        current: ComputedCell<Datum>\n    ) => cell.serieId === current.serieId || cell.data.x === current.data.x,\n}\n\nconst useSizeScale = (\n    size: false | SizeVariationConfig,\n    min: number,\n    max: number\n): ((value: number | null) => number) =>\n    useMemo(() => computeSizeScale(size, min, max), [size, min, max])\n\nconst useCellsStyle = <Datum extends HeatMapDatum = DefaultHeatMapDatum>({\n    cells,\n    minValue,\n    maxValue,\n    sizeVariation,\n    colors,\n    emptyColor,\n    opacity,\n    activeOpacity,\n    inactiveOpacity,\n    borderColor,\n    label,\n    labelTextColor,\n    valueFormat,\n    activeIds,\n}: {\n    cells: Omit<\n        ComputedCell<Datum>,\n        'formattedValue' | 'color' | 'opacity' | 'borderColor' | 'label' | 'labelTextColor'\n    >[]\n    minValue: number\n    maxValue: number\n    valueFormat?: HeatMapCommonProps<Datum>['valueFormat']\n    activeIds: string[]\n} & Pick<\n    HeatMapCommonProps<Datum>,\n    | 'sizeVariation'\n    | 'colors'\n    | 'emptyColor'\n    | 'opacity'\n    | 'activeOpacity'\n    | 'inactiveOpacity'\n    | 'borderColor'\n    | 'label'\n    | 'labelTextColor'\n>) => {\n    const getSize = useSizeScale(sizeVariation, minValue, maxValue)\n\n    const colorScale = useMemo(() => {\n        if (typeof colors === 'function') return null\n\n        return getContinuousColorScale(colors, {\n            min: minValue,\n            max: maxValue,\n        })\n    }, [colors, minValue, maxValue])\n\n    const getColor = useCallback(\n        (cell: Omit<ComputedCell<Datum>, 'color' | 'opacity' | 'borderColor'>) => {\n            if (cell.value !== null) {\n                if (typeof colors === 'function') return colors(cell)\n                if (colorScale !== null) return colorScale(cell.value)\n            }\n\n            return emptyColor\n        },\n        [colors, colorScale, emptyColor]\n    )\n    const theme = useTheme()\n    const getBorderColor = useInheritedColor(borderColor, theme)\n    const getLabelTextColor = useInheritedColor(labelTextColor, theme)\n\n    const formatValue = useValueFormatter(valueFormat)\n    const getLabel = usePropertyAccessor(label)\n\n    const styledCells = useMemo(\n        () =>\n            cells.map(cell => {\n                let computedOpacity = opacity\n                if (activeIds.length > 0) {\n                    computedOpacity = activeIds.includes(cell.id) ? activeOpacity : inactiveOpacity\n                }\n\n                const sizeMultiplier = getSize(cell.value)\n\n                const computedCell = {\n                    ...cell,\n                    width: cell.width * sizeMultiplier,\n                    height: cell.height * sizeMultiplier,\n                    formattedValue: cell.value !== null ? formatValue(cell.value) : null,\n                    opacity: computedOpacity,\n                } as ComputedCell<Datum>\n\n                computedCell.label = getLabel(computedCell)\n                computedCell.color = getColor(computedCell)\n                computedCell.borderColor = getBorderColor(computedCell)\n                computedCell.labelTextColor = getLabelTextColor(computedCell)\n\n                return computedCell\n            }),\n        [\n            cells,\n            getSize,\n            getColor,\n            getBorderColor,\n            getLabelTextColor,\n            formatValue,\n            getLabel,\n            activeIds,\n            opacity,\n            activeOpacity,\n            inactiveOpacity,\n        ]\n    )\n\n    return {\n        cells: styledCells,\n        colorScale,\n    }\n}\n\nexport const useHeatMap = <\n    Datum extends HeatMapDatum = DefaultHeatMapDatum,\n    ExtraProps extends object = Record<string, never>,\n>({\n    data,\n    valueFormat,\n    width: _width,\n    height: _height,\n    xOuterPadding = commonDefaultProps.xOuterPadding,\n    xInnerPadding = commonDefaultProps.xInnerPadding,\n    yOuterPadding = commonDefaultProps.yOuterPadding,\n    yInnerPadding = commonDefaultProps.yInnerPadding,\n    forceSquare = commonDefaultProps.forceSquare,\n    sizeVariation = commonDefaultProps.sizeVariation,\n    colors = commonDefaultProps.colors as HeatMapCommonProps<Datum>['colors'],\n    emptyColor = commonDefaultProps.emptyColor,\n    opacity = commonDefaultProps.opacity,\n    activeOpacity = commonDefaultProps.activeOpacity,\n    inactiveOpacity = commonDefaultProps.inactiveOpacity,\n    borderColor = commonDefaultProps.borderColor as HeatMapCommonProps<Datum>['borderColor'],\n    label = commonDefaultProps.label as HeatMapCommonProps<Datum>['label'],\n    labelTextColor = commonDefaultProps.labelTextColor as HeatMapCommonProps<Datum>['labelTextColor'],\n    hoverTarget = commonDefaultProps.hoverTarget,\n}: {\n    data: HeatMapDataProps<Datum, ExtraProps>['data']\n    width: number\n    height: number\n} & Partial<\n    Pick<\n        HeatMapCommonProps<Datum>,\n        | 'valueFormat'\n        | 'xOuterPadding'\n        | 'xInnerPadding'\n        | 'yOuterPadding'\n        | 'yInnerPadding'\n        | 'forceSquare'\n        | 'sizeVariation'\n        | 'colors'\n        | 'emptyColor'\n        | 'opacity'\n        | 'activeOpacity'\n        | 'inactiveOpacity'\n        | 'borderColor'\n        | 'label'\n        | 'labelTextColor'\n        | 'hoverTarget'\n    >\n>) => {\n    const [activeCell, setActiveCell] = useState<ComputedCell<Datum> | null>(null)\n\n    const { width, height, offsetX, offsetY, cells, xScale, yScale, minValue, maxValue } =\n        useComputeCells<Datum, ExtraProps>({\n            data,\n            width: _width,\n            height: _height,\n            xOuterPadding,\n            xInnerPadding,\n            yOuterPadding,\n            yInnerPadding,\n            forceSquare,\n        })\n\n    const activeIds = useMemo(() => {\n        if (!activeCell) return []\n\n        const isHoverTarget = isHoverTargetByType[hoverTarget]\n\n        return cells.filter(cell => isHoverTarget(cell, activeCell)).map(cell => cell.id)\n    }, [cells, activeCell, hoverTarget])\n\n    const { cells: computedCells, colorScale } = useCellsStyle<Datum>({\n        cells,\n        minValue,\n        maxValue,\n        sizeVariation,\n        colors,\n        emptyColor,\n        opacity,\n        activeOpacity,\n        inactiveOpacity,\n        borderColor,\n        label,\n        labelTextColor,\n        valueFormat,\n        activeIds,\n    })\n\n    return {\n        width,\n        height,\n        offsetX,\n        offsetY,\n        cells: computedCells,\n        xScale,\n        yScale,\n        colorScale,\n        activeCell,\n        setActiveCell,\n    }\n}\n\nexport const useCellAnnotations = <Datum extends HeatMapDatum>(\n    cells: ComputedCell<Datum>[],\n    annotations: AnnotationMatcher<ComputedCell<Datum>>[]\n) =>\n    useAnnotations<ComputedCell<Datum>>({\n        data: cells,\n        annotations,\n        getPosition: getCellAnnotationPosition,\n        getDimensions: getCellAnnotationDimensions,\n    })\n","import { memo, useMemo } from 'react'\nimport { animated, to } from '@react-spring/web'\nimport { useTheme } from '@nivo/theming'\nimport { Text } from '@nivo/text'\nimport { CellComponentProps, HeatMapDatum } from './types'\n\nconst NonMemoizedHeatMapCellRect = <Datum extends HeatMapDatum>({\n    cell,\n    borderWidth,\n    borderRadius,\n    animatedProps,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onClick,\n    enableLabels,\n}: CellComponentProps<Datum>) => {\n    const theme = useTheme()\n\n    const handlers = useMemo(\n        () => ({\n            onMouseEnter: onMouseEnter ? onMouseEnter(cell) : undefined,\n            onMouseMove: onMouseMove ? onMouseMove(cell) : undefined,\n            onMouseLeave: onMouseLeave ? onMouseLeave(cell) : undefined,\n            onClick: onClick ? onClick(cell) : undefined,\n        }),\n        [cell, onMouseEnter, onMouseMove, onMouseLeave, onClick]\n    )\n\n    return (\n        <animated.g\n            data-testid={`cell.${cell.id}`}\n            style={{ cursor: 'pointer' }}\n            opacity={animatedProps.opacity}\n            {...handlers}\n            transform={to(\n                [animatedProps.x, animatedProps.y, animatedProps.scale],\n                (x, y, scale) => `translate(${x}, ${y}) scale(${scale})`\n            )}\n        >\n            <animated.rect\n                transform={to(\n                    [animatedProps.width, animatedProps.height],\n                    (width, height) => `translate(${width * -0.5}, ${height * -0.5})`\n                )}\n                key={cell.id}\n                fill={animatedProps.color}\n                width={animatedProps.width}\n                height={animatedProps.height}\n                stroke={animatedProps.borderColor}\n                strokeWidth={borderWidth}\n                rx={borderRadius}\n                ry={borderRadius}\n            />\n            {enableLabels && (\n                <Text\n                    textAnchor=\"middle\"\n                    dominantBaseline=\"central\"\n                    fill={animatedProps.labelTextColor}\n                    style={{\n                        ...theme.labels.text,\n                        fill: undefined,\n                        userSelect: 'none',\n                    }}\n                >\n                    {cell.label}\n                </Text>\n            )}\n        </animated.g>\n    )\n}\n\nexport const HeatMapCellRect = memo(NonMemoizedHeatMapCellRect) as typeof NonMemoizedHeatMapCellRect\n","import { memo, useMemo } from 'react'\nimport { animated, to } from '@react-spring/web'\nimport { useTheme } from '@nivo/theming'\nimport { Text } from '@nivo/text'\nimport { HeatMapDatum, CellComponentProps } from './types'\n\nconst NonMemoizedHeatMapCellCircle = <Datum extends HeatMapDatum>({\n    cell,\n    borderWidth,\n    animatedProps,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onClick,\n    enableLabels,\n}: CellComponentProps<Datum>) => {\n    const theme = useTheme()\n\n    const handlers = useMemo(\n        () => ({\n            onMouseEnter: onMouseEnter ? onMouseEnter(cell) : undefined,\n            onMouseMove: onMouseMove ? onMouseMove(cell) : undefined,\n            onMouseLeave: onMouseLeave ? onMouseLeave(cell) : undefined,\n            onClick: onClick ? onClick(cell) : undefined,\n        }),\n        [cell, onMouseEnter, onMouseMove, onMouseLeave, onClick]\n    )\n\n    return (\n        <animated.g\n            data-testid={`cell.${cell.id}`}\n            style={{ cursor: 'pointer' }}\n            opacity={animatedProps.opacity}\n            {...handlers}\n            transform={to([animatedProps.x, animatedProps.y], (x, y) => `translate(${x}, ${y})`)}\n        >\n            <animated.circle\n                r={to(\n                    [animatedProps.width, animatedProps.height],\n                    (width, height) => Math.min(width, height) / 2\n                )}\n                fill={animatedProps.color}\n                fillOpacity={animatedProps.opacity}\n                strokeWidth={borderWidth}\n                stroke={animatedProps.borderColor}\n            />\n            {enableLabels && (\n                <Text\n                    dominantBaseline=\"central\"\n                    textAnchor=\"middle\"\n                    fill={animatedProps.labelTextColor}\n                    style={{\n                        ...theme.labels.text,\n                        fill: undefined,\n                    }}\n                >\n                    {cell.label}\n                </Text>\n            )}\n        </animated.g>\n    )\n}\n\nexport const HeatMapCellCircle = memo(\n    NonMemoizedHeatMapCellCircle\n) as typeof NonMemoizedHeatMapCellCircle\n","import { createElement, MouseEvent, useMemo } from 'react'\nimport { useTransition } from '@react-spring/web'\nimport { useMotionConfig } from '@nivo/core'\nimport { useTooltip } from '@nivo/tooltip'\nimport {\n    CellComponent,\n    ComputedCell,\n    HeatMapDatum,\n    HeatMapSvgProps,\n    CellAnimatedProps,\n} from './types'\nimport { HeatMapCellRect } from './HeatMapCellRect'\nimport { HeatMapCellCircle } from './HeatMapCellCircle'\n\ninterface HeatMapCellsProps<Datum extends HeatMapDatum, ExtraProps extends object> {\n    cells: ComputedCell<Datum>[]\n    cellComponent: NonNullable<HeatMapSvgProps<Datum, ExtraProps>['cellComponent']>\n    borderRadius: NonNullable<HeatMapSvgProps<Datum, ExtraProps>['borderRadius']>\n    borderWidth: NonNullable<HeatMapSvgProps<Datum, ExtraProps>['borderWidth']>\n    isInteractive: NonNullable<HeatMapSvgProps<Datum, ExtraProps>['isInteractive']>\n    setActiveCell: (cell: ComputedCell<Datum> | null) => void\n    onMouseEnter: HeatMapSvgProps<Datum, ExtraProps>['onMouseEnter']\n    onMouseMove: HeatMapSvgProps<Datum, ExtraProps>['onMouseMove']\n    onMouseLeave: HeatMapSvgProps<Datum, ExtraProps>['onMouseLeave']\n    onClick: HeatMapSvgProps<Datum, ExtraProps>['onClick']\n    tooltip: NonNullable<HeatMapSvgProps<Datum, ExtraProps>['tooltip']>\n    enableLabels: NonNullable<HeatMapSvgProps<Datum, ExtraProps>['enableLabels']>\n}\n\nconst enterTransition = <Datum extends HeatMapDatum>(cell: ComputedCell<Datum>) => ({\n    x: cell.x,\n    y: cell.y,\n    width: cell.width,\n    height: cell.height,\n    color: cell.color,\n    opacity: 0,\n    borderColor: cell.borderColor,\n    labelTextColor: cell.labelTextColor,\n    scale: 0,\n})\n\nconst regularTransition = <Datum extends HeatMapDatum>(cell: ComputedCell<Datum>) => ({\n    x: cell.x,\n    y: cell.y,\n    width: cell.width,\n    height: cell.height,\n    color: cell.color,\n    opacity: cell.opacity,\n    borderColor: cell.borderColor,\n    labelTextColor: cell.labelTextColor,\n    scale: 1,\n})\n\nconst exitTransition = <Datum extends HeatMapDatum>(cell: ComputedCell<Datum>) => ({\n    x: cell.x,\n    y: cell.y,\n    width: cell.width,\n    height: cell.height,\n    color: cell.color,\n    opacity: 0,\n    borderColor: cell.borderColor,\n    labelTextColor: cell.labelTextColor,\n    scale: 0,\n})\n\nexport const HeatMapCells = <Datum extends HeatMapDatum, ExtraProps extends object>({\n    cells,\n    cellComponent,\n    borderRadius,\n    borderWidth,\n    isInteractive,\n    setActiveCell,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onClick,\n    tooltip,\n    enableLabels,\n}: HeatMapCellsProps<Datum, ExtraProps>) => {\n    const { animate, config: springConfig } = useMotionConfig()\n\n    const transition = useTransition<ComputedCell<Datum>, CellAnimatedProps>(cells, {\n        keys: (cell: ComputedCell<Datum>) => cell.id,\n        initial: regularTransition,\n        from: enterTransition,\n        enter: regularTransition,\n        update: regularTransition,\n        leave: exitTransition,\n        config: springConfig,\n        immediate: !animate,\n    })\n\n    const { showTooltipFromEvent, hideTooltip } = useTooltip()\n\n    const handleMouseEnter = useMemo(() => {\n        if (!isInteractive) return undefined\n\n        return (cell: ComputedCell<Datum>) => (event: MouseEvent) => {\n            showTooltipFromEvent(createElement(tooltip, { cell }), event)\n            setActiveCell(cell)\n            onMouseEnter?.(cell, event)\n        }\n    }, [isInteractive, showTooltipFromEvent, tooltip, setActiveCell, onMouseEnter])\n\n    const handleMouseMove = useMemo(() => {\n        if (!isInteractive) return undefined\n\n        return (cell: ComputedCell<Datum>) => (event: MouseEvent) => {\n            showTooltipFromEvent(createElement(tooltip, { cell }), event)\n            onMouseMove?.(cell, event)\n        }\n    }, [isInteractive, showTooltipFromEvent, tooltip, onMouseMove])\n\n    const handleMouseLeave = useMemo(() => {\n        if (!isInteractive) return undefined\n\n        return (cell: ComputedCell<Datum>) => (event: MouseEvent) => {\n            hideTooltip()\n            setActiveCell(null)\n            onMouseLeave?.(cell, event)\n        }\n    }, [isInteractive, hideTooltip, setActiveCell, onMouseLeave])\n\n    const handleClick = useMemo(() => {\n        if (!isInteractive) return undefined\n\n        return (cell: ComputedCell<Datum>) => (event: MouseEvent) => {\n            onClick?.(cell, event)\n        }\n    }, [isInteractive, onClick])\n\n    let Cell: CellComponent<Datum>\n    if (cellComponent === 'rect') {\n        Cell = HeatMapCellRect\n    } else if (cellComponent === 'circle') {\n        Cell = HeatMapCellCircle\n    } else {\n        Cell = cellComponent\n    }\n\n    return (\n        <>\n            {transition((animatedProps, cell) =>\n                createElement(Cell, {\n                    cell,\n                    borderRadius,\n                    borderWidth,\n                    animatedProps,\n                    enableLabels,\n                    onMouseEnter: handleMouseEnter,\n                    onMouseMove: handleMouseMove,\n                    onMouseLeave: handleMouseLeave,\n                    onClick: handleClick,\n                })\n            )}\n        </>\n    )\n}\n","import { Annotation } from '@nivo/annotations'\nimport { ComputedCell, HeatMapCommonProps, HeatMapDatum } from './types'\nimport { useCellAnnotations } from './hooks'\n\ninterface HeatMapCellAnnotationsProps<Datum extends HeatMapDatum> {\n    cells: ComputedCell<Datum>[]\n    annotations: NonNullable<HeatMapCommonProps<Datum>['annotations']>\n}\n\nexport const HeatMapCellAnnotations = <Datum extends HeatMapDatum>({\n    cells,\n    annotations,\n}: HeatMapCellAnnotationsProps<Datum>) => {\n    const boundAnnotations = useCellAnnotations<Datum>(cells, annotations)\n\n    return (\n        <>\n            {boundAnnotations.map((annotation, i) => (\n                <Annotation key={i} {...annotation} />\n            ))}\n        </>\n    )\n}\n","import { ReactNode, Fragment, createElement, useMemo, forwardRef, Ref, ReactElement } from 'react'\nimport { SvgWrapper, Container, useDimensions, WithChartRef } from '@nivo/core'\nimport { Axes, Grid } from '@nivo/axes'\nimport { AnchoredContinuousColorsLegendSvg } from '@nivo/legends'\nimport {\n    DefaultHeatMapDatum,\n    HeatMapDatum,\n    HeatMapCommonProps,\n    HeatMapSvgProps,\n    LayerId,\n    CustomLayerProps,\n} from './types'\nimport { useHeatMap } from './hooks'\nimport { svgDefaultProps } from './defaults'\nimport { HeatMapCells } from './HeatMapCells'\nimport { HeatMapCellAnnotations } from './HeatMapCellAnnotations'\n\ntype InnerHeatMapProps<Datum extends HeatMapDatum, ExtraProps extends object> = Omit<\n    HeatMapSvgProps<Datum, ExtraProps>,\n    'animate' | 'motionConfig' | 'renderWrapper' | 'theme'\n> & {\n    forwardedRef: Ref<SVGSVGElement>\n}\n\nconst InnerHeatMap = <Datum extends HeatMapDatum, ExtraProps extends object>({\n    data,\n    layers = svgDefaultProps.layers,\n    valueFormat,\n    width,\n    height,\n    margin: partialMargin,\n    forceSquare = svgDefaultProps.forceSquare,\n    xInnerPadding = svgDefaultProps.xInnerPadding,\n    xOuterPadding = svgDefaultProps.xOuterPadding,\n    yInnerPadding = svgDefaultProps.yInnerPadding,\n    yOuterPadding = svgDefaultProps.yOuterPadding,\n    sizeVariation = svgDefaultProps.sizeVariation,\n    cellComponent = svgDefaultProps.cellComponent as NonNullable<\n        HeatMapSvgProps<Datum, ExtraProps>['cellComponent']\n    >,\n    opacity = svgDefaultProps.opacity,\n    activeOpacity = svgDefaultProps.activeOpacity,\n    inactiveOpacity = svgDefaultProps.inactiveOpacity,\n    borderRadius = svgDefaultProps.borderRadius,\n    borderWidth = svgDefaultProps.borderWidth,\n    borderColor = svgDefaultProps.borderColor as HeatMapCommonProps<Datum>['borderColor'],\n    enableGridX = svgDefaultProps.enableGridX,\n    enableGridY = svgDefaultProps.enableGridY,\n    axisTop = svgDefaultProps.axisTop,\n    axisRight = svgDefaultProps.axisRight,\n    axisBottom = svgDefaultProps.axisBottom,\n    axisLeft = svgDefaultProps.axisLeft,\n    enableLabels = svgDefaultProps.enableLabels,\n    label = svgDefaultProps.label as HeatMapCommonProps<Datum>['label'],\n    labelTextColor = svgDefaultProps.labelTextColor as HeatMapCommonProps<Datum>['labelTextColor'],\n    colors = svgDefaultProps.colors as HeatMapCommonProps<Datum>['colors'],\n    emptyColor = svgDefaultProps.emptyColor,\n    legends = svgDefaultProps.legends,\n    annotations = svgDefaultProps.annotations as HeatMapCommonProps<Datum>['annotations'],\n    isInteractive = svgDefaultProps.isInteractive,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onClick,\n    hoverTarget = svgDefaultProps.hoverTarget,\n    tooltip = svgDefaultProps.tooltip as HeatMapCommonProps<Datum>['tooltip'],\n    role,\n    ariaLabel,\n    ariaLabelledBy,\n    ariaDescribedBy,\n    forwardedRef,\n}: InnerHeatMapProps<Datum, ExtraProps>) => {\n    const {\n        margin: _margin,\n        innerWidth: _innerWidth,\n        innerHeight: _innerHeight,\n        outerWidth,\n        outerHeight,\n    } = useDimensions(width, height, partialMargin)\n\n    const {\n        width: innerWidth,\n        height: innerHeight,\n        offsetX,\n        offsetY,\n        xScale,\n        yScale,\n        cells,\n        colorScale,\n        activeCell,\n        setActiveCell,\n    } = useHeatMap<Datum, ExtraProps>({\n        data,\n        valueFormat,\n        width: _innerWidth,\n        height: _innerHeight,\n        forceSquare,\n        xInnerPadding,\n        xOuterPadding,\n        yInnerPadding,\n        yOuterPadding,\n        sizeVariation,\n        colors,\n        emptyColor,\n        opacity,\n        activeOpacity,\n        inactiveOpacity,\n        borderColor,\n        label,\n        labelTextColor,\n        hoverTarget,\n    })\n\n    const margin = useMemo(\n        () => ({\n            ..._margin,\n            top: _margin.top + offsetY,\n            left: _margin.left + offsetX,\n        }),\n        [_margin, offsetX, offsetY]\n    )\n\n    const layerById: Record<LayerId, ReactNode> = {\n        grid: null,\n        axes: null,\n        cells: null,\n        legends: null,\n        annotations: null,\n    }\n\n    if (layers.includes('grid')) {\n        layerById.grid = (\n            <Grid\n                key=\"grid\"\n                width={innerWidth} // - offsetX * 2\n                height={innerHeight} // - offsetY * 2\n                xScale={enableGridX ? xScale : null}\n                yScale={enableGridY ? yScale : null}\n            />\n        )\n    }\n\n    if (layers.includes('axes')) {\n        layerById.axes = (\n            <Axes\n                key=\"axes\"\n                xScale={xScale}\n                yScale={yScale}\n                width={innerWidth} // - offsetX * 2\n                height={innerHeight} // - offsetY * 2\n                top={axisTop}\n                right={axisRight}\n                bottom={axisBottom}\n                left={axisLeft}\n            />\n        )\n    }\n\n    if (layers.includes('cells')) {\n        layerById.cells = (\n            <Fragment key=\"cells\">\n                <HeatMapCells<Datum, ExtraProps>\n                    cells={cells}\n                    cellComponent={cellComponent}\n                    borderRadius={borderRadius}\n                    borderWidth={borderWidth}\n                    isInteractive={isInteractive}\n                    setActiveCell={setActiveCell}\n                    onMouseEnter={onMouseEnter}\n                    onMouseMove={onMouseMove}\n                    onMouseLeave={onMouseLeave}\n                    onClick={onClick}\n                    tooltip={tooltip}\n                    enableLabels={enableLabels}\n                />\n            </Fragment>\n        )\n    }\n\n    if (layers.includes('legends') && colorScale !== null) {\n        layerById.legends = (\n            <Fragment key=\"legends\">\n                {legends.map((legend, index) => (\n                    <AnchoredContinuousColorsLegendSvg\n                        {...legend}\n                        key={index}\n                        containerWidth={innerWidth}\n                        containerHeight={innerHeight}\n                        scale={colorScale}\n                    />\n                ))}\n            </Fragment>\n        )\n    }\n\n    if (layers.includes('annotations') && annotations.length > 0) {\n        layerById.annotations = (\n            <HeatMapCellAnnotations<Datum>\n                key=\"annotations\"\n                cells={cells}\n                annotations={annotations}\n            />\n        )\n    }\n\n    const customLayerProps: CustomLayerProps<Datum> = {\n        cells,\n        activeCell,\n        setActiveCell,\n    }\n\n    return (\n        <SvgWrapper\n            width={outerWidth}\n            height={outerHeight}\n            margin={Object.assign({}, margin, {\n                top: margin.top, //+ offsetY,\n                left: margin.left, // + offsetX,\n            })}\n            role={role}\n            ariaLabel={ariaLabel}\n            ariaLabelledBy={ariaLabelledBy}\n            ariaDescribedBy={ariaDescribedBy}\n            ref={forwardedRef}\n        >\n            {layers.map((layer, i) => {\n                if (typeof layer === 'function') {\n                    return <Fragment key={i}>{createElement(layer, customLayerProps)}</Fragment>\n                }\n\n                return layerById?.[layer] ?? null\n            })}\n        </SvgWrapper>\n    )\n}\n\nexport const HeatMap = forwardRef(\n    <\n        Datum extends HeatMapDatum = DefaultHeatMapDatum,\n        ExtraProps extends object = Record<string, never>,\n    >(\n        {\n            isInteractive = svgDefaultProps.isInteractive,\n            animate = svgDefaultProps.animate,\n            motionConfig = svgDefaultProps.motionConfig,\n            theme,\n            renderWrapper,\n            ...otherProps\n        }: HeatMapSvgProps<Datum, ExtraProps>,\n        ref: Ref<SVGSVGElement>\n    ) => (\n        <Container\n            {...{\n                animate,\n                isInteractive,\n                motionConfig,\n                renderWrapper,\n                theme,\n            }}\n        >\n            <InnerHeatMap<Datum, ExtraProps>\n                isInteractive={isInteractive}\n                {...otherProps}\n                forwardedRef={ref}\n            />\n        </Container>\n    )\n) as <\n    Datum extends HeatMapDatum = DefaultHeatMapDatum,\n    ExtraProps extends object = Record<string, never>,\n>(\n    props: WithChartRef<HeatMapSvgProps<Datum, ExtraProps>, SVGSVGElement>\n) => ReactElement\n","import { forwardRef, Ref, ReactElement } from 'react'\nimport { ResponsiveWrapper, WithChartRef, ResponsiveProps } from '@nivo/core'\nimport { DefaultHeatMapDatum, HeatMapDatum, HeatMapSvgProps } from './types'\nimport { HeatMap } from './HeatMap'\n\nexport const ResponsiveHeatMap = forwardRef(\n    <\n        Datum extends HeatMapDatum = DefaultHeatMapDatum,\n        ExtraProps extends object = Record<string, never>,\n    >(\n        {\n            defaultWidth,\n            defaultHeight,\n            onResize,\n            debounceResize,\n            ...props\n        }: ResponsiveProps<HeatMapSvgProps<Datum, ExtraProps>>,\n        ref: Ref<SVGSVGElement>\n    ) => (\n        <ResponsiveWrapper\n            defaultWidth={defaultWidth}\n            defaultHeight={defaultHeight}\n            onResize={onResize}\n            debounceResize={debounceResize}\n        >\n            {({ width, height }) => (\n                <HeatMap<Datum, ExtraProps> width={width} height={height} {...props} ref={ref} />\n            )}\n        </ResponsiveWrapper>\n    )\n) as <\n    Datum extends HeatMapDatum = DefaultHeatMapDatum,\n    ExtraProps extends object = Record<string, never>,\n>(\n    props: WithChartRef<ResponsiveProps<HeatMapSvgProps<Datum, ExtraProps>>, SVGSVGElement>\n) => ReactElement\n","import { setCanvasFont, drawCanvasText } from '@nivo/text'\nimport { CellCanvasRendererProps, HeatMapDatum } from './types'\n\nexport const renderRect = <Datum extends HeatMapDatum>(\n    ctx: CanvasRenderingContext2D,\n    {\n        cell: { x, y, width, height, color, borderColor, opacity, labelTextColor, label },\n        borderWidth,\n        enableLabels,\n        theme,\n    }: CellCanvasRendererProps<Datum>\n) => {\n    ctx.save()\n    ctx.globalAlpha = opacity\n\n    ctx.fillStyle = color\n    if (borderWidth > 0) {\n        ctx.strokeStyle = borderColor\n        ctx.lineWidth = borderWidth\n    }\n\n    ctx.fillRect(x - width / 2, y - height / 2, width, height)\n    if (borderWidth > 0) {\n        ctx.strokeRect(x - width / 2, y - height / 2, width, height)\n    }\n\n    if (enableLabels) {\n        setCanvasFont(ctx, theme.labels.text)\n        ctx.textAlign = 'center'\n        ctx.textBaseline = 'middle'\n        drawCanvasText(\n            ctx,\n            {\n                ...theme.labels.text,\n                fill: labelTextColor,\n            },\n            label,\n            x,\n            y\n        )\n    }\n\n    ctx.restore()\n}\n\nexport const renderCircle = <Datum extends HeatMapDatum>(\n    ctx: CanvasRenderingContext2D,\n    {\n        cell: { x, y, width, height, color, borderColor, opacity, labelTextColor, label },\n        borderWidth,\n        enableLabels,\n        theme,\n    }: CellCanvasRendererProps<Datum>\n) => {\n    ctx.save()\n    ctx.globalAlpha = opacity\n\n    const radius = Math.min(width, height) / 2\n\n    ctx.fillStyle = color\n    if (borderWidth > 0) {\n        ctx.strokeStyle = borderColor\n        ctx.lineWidth = borderWidth\n    }\n\n    ctx.beginPath()\n    ctx.arc(x, y, radius, 0, 2 * Math.PI)\n\n    ctx.fill()\n    if (borderWidth > 0) {\n        ctx.stroke()\n    }\n\n    if (enableLabels) {\n        setCanvasFont(ctx, theme.labels.text)\n        ctx.textAlign = 'center'\n        ctx.textBaseline = 'middle'\n        drawCanvasText(\n            ctx,\n            {\n                ...theme.labels.text,\n                fill: labelTextColor,\n            },\n            label,\n            x,\n            y\n        )\n    }\n\n    ctx.restore()\n}\n","import {\n    useEffect,\n    useRef,\n    useCallback,\n    createElement,\n    useMemo,\n    MouseEvent,\n    forwardRef,\n    Ref,\n    ReactElement,\n} from 'react'\nimport {\n    getRelativeCursor,\n    isCursorInRect,\n    useDimensions,\n    Container,\n    WithChartRef,\n    mergeRefs,\n} from '@nivo/core'\nimport { useTheme } from '@nivo/theming'\nimport { renderAxesToCanvas, renderGridLinesToCanvas } from '@nivo/axes'\nimport { useTooltip } from '@nivo/tooltip'\nimport { renderContinuousColorLegendToCanvas } from '@nivo/legends'\nimport { renderAnnotationsToCanvas, useComputedAnnotations } from '@nivo/annotations'\nimport { useHeatMap, useCellAnnotations } from './hooks'\nimport { renderRect, renderCircle } from './canvas'\nimport { canvasDefaultProps } from './defaults'\nimport {\n    CellCanvasRenderer,\n    DefaultHeatMapDatum,\n    HeatMapCanvasProps,\n    HeatMapCommonProps,\n    HeatMapDatum,\n    CellShape,\n    CustomLayerProps,\n} from './types'\n\ntype InnerNetworkCanvasProps<Datum extends HeatMapDatum, ExtraProps extends object> = Omit<\n    HeatMapCanvasProps<Datum, ExtraProps>,\n    'renderWrapper' | 'theme'\n> & {\n    forwardedRef: Ref<HTMLCanvasElement>\n}\n\nconst InnerHeatMapCanvas = <Datum extends HeatMapDatum, ExtraProps extends object>({\n    data,\n    layers = canvasDefaultProps.layers,\n    valueFormat,\n    width,\n    height,\n    margin: partialMargin,\n    xInnerPadding = canvasDefaultProps.xInnerPadding,\n    xOuterPadding = canvasDefaultProps.xOuterPadding,\n    yInnerPadding = canvasDefaultProps.yInnerPadding,\n    yOuterPadding = canvasDefaultProps.yOuterPadding,\n    forceSquare = canvasDefaultProps.forceSquare,\n    sizeVariation = canvasDefaultProps.sizeVariation,\n    renderCell: _renderCell = canvasDefaultProps.renderCell as CellShape,\n    opacity = canvasDefaultProps.opacity,\n    activeOpacity = canvasDefaultProps.activeOpacity,\n    inactiveOpacity = canvasDefaultProps.inactiveOpacity,\n    borderWidth = canvasDefaultProps.borderWidth,\n    borderColor = canvasDefaultProps.borderColor as HeatMapCommonProps<Datum>['borderColor'],\n    enableGridX = canvasDefaultProps.enableGridX,\n    enableGridY = canvasDefaultProps.enableGridY,\n    axisTop = canvasDefaultProps.axisTop,\n    axisRight = canvasDefaultProps.axisRight,\n    axisBottom = canvasDefaultProps.axisBottom,\n    axisLeft = canvasDefaultProps.axisLeft,\n    enableLabels = canvasDefaultProps.enableLabels,\n    label = canvasDefaultProps.label as HeatMapCommonProps<Datum>['label'],\n    labelTextColor = canvasDefaultProps.labelTextColor as HeatMapCommonProps<Datum>['labelTextColor'],\n    colors = canvasDefaultProps.colors as HeatMapCommonProps<Datum>['colors'],\n    emptyColor = canvasDefaultProps.emptyColor,\n    legends = canvasDefaultProps.legends,\n    annotations = canvasDefaultProps.annotations as HeatMapCommonProps<Datum>['annotations'],\n    isInteractive = canvasDefaultProps.isInteractive,\n    onClick,\n    hoverTarget = canvasDefaultProps.hoverTarget,\n    tooltip = canvasDefaultProps.tooltip as HeatMapCommonProps<Datum>['tooltip'],\n    role,\n    ariaLabel,\n    ariaLabelledBy,\n    ariaDescribedBy,\n    pixelRatio = canvasDefaultProps.pixelRatio,\n    forwardedRef,\n}: InnerNetworkCanvasProps<Datum, ExtraProps>) => {\n    const canvasEl = useRef<HTMLCanvasElement | null>(null)\n\n    const {\n        margin: _margin,\n        innerWidth: _innerWidth,\n        innerHeight: _innerHeight,\n        outerWidth,\n        outerHeight,\n    } = useDimensions(width, height, partialMargin)\n\n    const {\n        width: innerWidth,\n        height: innerHeight,\n        offsetX,\n        offsetY,\n        xScale,\n        yScale,\n        cells,\n        colorScale,\n        activeCell,\n        setActiveCell,\n    } = useHeatMap<Datum, ExtraProps>({\n        data,\n        valueFormat,\n        width: _innerWidth,\n        height: _innerHeight,\n        xInnerPadding,\n        xOuterPadding,\n        yInnerPadding,\n        yOuterPadding,\n        forceSquare,\n        sizeVariation,\n        colors,\n        emptyColor,\n        opacity,\n        activeOpacity,\n        inactiveOpacity,\n        borderColor,\n        label,\n        labelTextColor,\n        hoverTarget,\n    })\n\n    const margin = useMemo(\n        () => ({\n            ..._margin,\n            top: _margin.top + offsetY,\n            left: _margin.left + offsetX,\n        }),\n        [_margin, offsetX, offsetY]\n    )\n\n    const boundAnnotations = useCellAnnotations(cells, annotations)\n    const computedAnnotations = useComputedAnnotations({\n        annotations: boundAnnotations,\n    })\n\n    let renderCell: CellCanvasRenderer<Datum>\n    if (typeof _renderCell === 'function') {\n        renderCell = _renderCell\n    } else if (_renderCell === 'circle') {\n        renderCell = renderCircle\n    } else {\n        renderCell = renderRect\n    }\n\n    const theme = useTheme()\n\n    const customLayerProps: CustomLayerProps<Datum> = useMemo(\n        () => ({\n            cells,\n            activeCell,\n            setActiveCell,\n        }),\n        [cells, activeCell, setActiveCell]\n    )\n\n    useEffect(() => {\n        if (canvasEl.current === null) return\n\n        const ctx = canvasEl.current.getContext('2d')\n        if (!ctx) return\n\n        canvasEl.current.width = outerWidth * pixelRatio\n        canvasEl.current.height = outerHeight * pixelRatio\n\n        ctx.scale(pixelRatio, pixelRatio)\n\n        ctx.fillStyle = theme.background\n        ctx.fillRect(0, 0, outerWidth, outerHeight)\n        ctx.translate(margin.left, margin.top) // + offsetX, margin.top + offsetY)\n\n        layers.forEach(layer => {\n            if (layer === 'grid') {\n                ctx.lineWidth = theme.grid.line.strokeWidth as number\n                ctx.strokeStyle = theme.grid.line.stroke as string\n\n                if (enableGridX) {\n                    renderGridLinesToCanvas(ctx, {\n                        width: innerWidth,\n                        height: innerHeight,\n                        scale: xScale,\n                        axis: 'x',\n                    })\n                }\n                if (enableGridY) {\n                    renderGridLinesToCanvas(ctx, {\n                        width: innerWidth,\n                        height: innerHeight,\n                        scale: yScale,\n                        axis: 'y',\n                    })\n                }\n            } else if (layer === 'axes') {\n                renderAxesToCanvas(ctx, {\n                    xScale,\n                    yScale,\n                    width: innerWidth, // - offsetX * 2,\n                    height: innerHeight, // - offsetY * 2,\n                    top: axisTop,\n                    right: axisRight,\n                    bottom: axisBottom,\n                    left: axisLeft,\n                    theme,\n                })\n            } else if (layer === 'cells') {\n                ctx.textAlign = 'center'\n                ctx.textBaseline = 'middle'\n\n                cells.forEach(cell => {\n                    renderCell(ctx, { cell, borderWidth, enableLabels, theme })\n                })\n            } else if (layer === 'legends' && colorScale !== null) {\n                legends.forEach(legend => {\n                    renderContinuousColorLegendToCanvas(ctx, {\n                        ...legend,\n                        containerWidth: innerWidth,\n                        containerHeight: innerHeight,\n                        scale: colorScale,\n                        theme,\n                    })\n                })\n            } else if (layer === 'annotations') {\n                renderAnnotationsToCanvas(ctx, {\n                    annotations: computedAnnotations,\n                    theme,\n                })\n            } else if (typeof layer === 'function') {\n                layer(ctx, customLayerProps)\n            }\n        })\n    }, [\n        canvasEl,\n        pixelRatio,\n        outerWidth,\n        outerHeight,\n        innerWidth,\n        innerHeight,\n        margin,\n        layers,\n        customLayerProps,\n        cells,\n        renderCell,\n        enableGridX,\n        enableGridY,\n        axisTop,\n        axisRight,\n        axisBottom,\n        axisLeft,\n        xScale,\n        yScale,\n        theme,\n        borderWidth,\n        enableLabels,\n        colorScale,\n        legends,\n        computedAnnotations,\n    ])\n\n    const { showTooltipFromEvent, hideTooltip } = useTooltip()\n\n    const handleMouseHover = useCallback(\n        (event: MouseEvent<HTMLCanvasElement>) => {\n            if (canvasEl.current === null) return\n\n            const [x, y] = getRelativeCursor(canvasEl.current, event)\n\n            const cell = cells.find(c =>\n                isCursorInRect(\n                    c.x + margin.left - c.width / 2, // + offsetX - c.width / 2,\n                    c.y + margin.top - c.height / 2, //+ offsetY - c.height / 2,\n                    c.width,\n                    c.height,\n                    x,\n                    y\n                )\n            )\n            if (cell !== undefined) {\n                setActiveCell(cell)\n                showTooltipFromEvent(createElement(tooltip, { cell }), event)\n            } else {\n                setActiveCell(null)\n                hideTooltip()\n            }\n        },\n        [\n            canvasEl,\n            cells,\n            margin,\n            // offsetX,\n            // offsetY,\n            setActiveCell,\n            showTooltipFromEvent,\n            hideTooltip,\n            tooltip,\n        ]\n    )\n\n    const handleMouseLeave = useCallback(() => {\n        setActiveCell(null)\n        hideTooltip()\n    }, [setActiveCell, hideTooltip])\n\n    const handleClick = useCallback(\n        (event: MouseEvent<HTMLCanvasElement>) => {\n            if (activeCell === null) return\n\n            onClick?.(activeCell, event)\n        },\n        [activeCell, onClick]\n    )\n\n    return (\n        <canvas\n            ref={mergeRefs(canvasEl, forwardedRef)}\n            width={outerWidth * pixelRatio}\n            height={outerHeight * pixelRatio}\n            style={{\n                width: outerWidth,\n                height: outerHeight,\n            }}\n            onMouseEnter={isInteractive ? handleMouseHover : undefined}\n            onMouseMove={isInteractive ? handleMouseHover : undefined}\n            onMouseLeave={isInteractive ? handleMouseLeave : undefined}\n            onClick={isInteractive ? handleClick : undefined}\n            role={role}\n            aria-label={ariaLabel}\n            aria-labelledby={ariaLabelledBy}\n            aria-describedby={ariaDescribedBy}\n        />\n    )\n}\n\nexport const HeatMapCanvas = forwardRef(\n    <\n        Datum extends HeatMapDatum = DefaultHeatMapDatum,\n        ExtraProps extends object = Record<string, never>,\n    >(\n        {\n            theme,\n            isInteractive = canvasDefaultProps.isInteractive,\n            animate = canvasDefaultProps.animate,\n            motionConfig = canvasDefaultProps.motionConfig,\n            renderWrapper,\n            ...otherProps\n        }: HeatMapCanvasProps<Datum, ExtraProps>,\n        ref: Ref<HTMLCanvasElement>\n    ) => (\n        <Container {...{ isInteractive, animate, motionConfig, theme, renderWrapper }}>\n            <InnerHeatMapCanvas<Datum, ExtraProps>\n                isInteractive={isInteractive}\n                {...otherProps}\n                forwardedRef={ref}\n            />\n        </Container>\n    )\n) as <\n    Datum extends HeatMapDatum = DefaultHeatMapDatum,\n    ExtraProps extends object = Record<string, never>,\n>(\n    props: WithChartRef<HeatMapCanvasProps<Datum, ExtraProps>, HTMLCanvasElement>\n) => ReactElement\n","import { forwardRef, ReactElement, Ref } from 'react'\nimport { ResponsiveWrapper, ResponsiveProps, WithChartRef } from '@nivo/core'\nimport { DefaultHeatMapDatum, HeatMapCanvasProps, HeatMapDatum } from './types'\nimport { HeatMapCanvas } from './HeatMapCanvas'\n\nexport const ResponsiveHeatMapCanvas = forwardRef(\n    <\n        Datum extends HeatMapDatum = DefaultHeatMapDatum,\n        ExtraProps extends object = Record<string, never>,\n    >(\n        {\n            defaultWidth,\n            defaultHeight,\n            onResize,\n            debounceResize,\n            ...props\n        }: ResponsiveProps<HeatMapCanvasProps<Datum, ExtraProps>>,\n        ref: Ref<HTMLCanvasElement>\n    ) => (\n        <ResponsiveWrapper\n            defaultWidth={defaultWidth}\n            defaultHeight={defaultHeight}\n            onResize={onResize}\n            debounceResize={debounceResize}\n        >\n            {({ width, height }) => (\n                <HeatMapCanvas<Datum, ExtraProps>\n                    width={width}\n                    height={height}\n                    {...props}\n                    ref={ref}\n                />\n            )}\n        </ResponsiveWrapper>\n    )\n) as <\n    Datum extends HeatMapDatum = DefaultHeatMapDatum,\n    ExtraProps extends object = Record<string, never>,\n>(\n    props: WithChartRef<ResponsiveProps<HeatMapCanvasProps<Datum, ExtraProps>>, HTMLCanvasElement>\n) => ReactElement\n"],"names":["commonDefaultProps","layers","forceSquare","xInnerPadding","xOuterPadding","yInnerPadding","yOuterPadding","sizeVariation","opacity","activeOpacity","inactiveOpacity","borderWidth","borderColor","from","modifiers","enableGridX","enableGridY","enableLabels","label","labelTextColor","colors","type","scheme","emptyColor","legends","annotations","isInteractive","hoverTarget","tooltip","memo","_ref","cell","formattedValue","_jsx","BasicTooltip","id","serieId","data","x","value","enableChip","color","animate","motionConfig","svgDefaultProps","_extends","axisTop","axisRight","axisBottom","axisLeft","borderRadius","cellComponent","canvasDefaultProps","renderCell","pixelRatio","window","devicePixelRatio","computeLayout","_width","width","_height","height","rows","columns","offsetX","offsetY","cellWidth","Math","max","cellHeight","cellSize","min","computeCells","_ref2","xValuesSet","Set","serieIds","allValues","cells","forEach","serie","push","datum","add","undefined","y","xValues","Array","_computeLayout","length","xScale","castBandScale","scaleBand","domain","range","paddingOuter","paddingInner","yScale","bandwidth","cellsWithPosition","map","minValue","apply","maxValue","computeSizeScale","size","scale","scaleLinear","values","sizes","getCellAnnotationPosition","getCellAnnotationDimensions","useComputeCells","useMemo","isHoverTargetByType","current","row","column","rowColumn","useCellsStyle","valueFormat","activeIds","getSize","colorScale","getContinuousColorScale","getColor","useCallback","theme","useTheme","getBorderColor","useInheritedColor","getLabelTextColor","formatValue","useValueFormatter","getLabel","usePropertyAccessor","computedOpacity","includes","sizeMultiplier","computedCell","useHeatMap","_ref3","_ref3$xOuterPadding","_ref3$xInnerPadding","_ref3$yOuterPadding","_ref3$yInnerPadding","_ref3$forceSquare","_ref3$sizeVariation","_ref3$colors","_ref3$emptyColor","_ref3$opacity","_ref3$activeOpacity","_ref3$inactiveOpacity","_ref3$borderColor","_ref3$label","_ref3$labelTextColor","_ref3$hoverTarget","_useState","useState","activeCell","setActiveCell","_useComputeCells","isHoverTarget","filter","_useCellsStyle","useCellAnnotations","useAnnotations","getPosition","getDimensions","HeatMapCellRect","animatedProps","onMouseEnter","onMouseMove","onMouseLeave","onClick","handlers","_jsxs","animated","g","style","cursor","transform","to","children","rect","fill","stroke","strokeWidth","rx","ry","Text","textAnchor","dominantBaseline","labels","text","userSelect","HeatMapCellCircle","circle","r","fillOpacity","jsx","enterTransition","regularTransition","exitTransition","HeatMapCells","Cell","_useMotionConfig","useMotionConfig","springConfig","config","transition","useTransition","keys","initial","enter","update","leave","immediate","_useTooltip","useTooltip","showTooltipFromEvent","hideTooltip","handleMouseEnter","event","createElement","handleMouseMove","handleMouseLeave","handleClick","_Fragment","HeatMapCellAnnotations","boundAnnotations","annotation","i","Annotation","InnerHeatMap","_ref$layers","partialMargin","margin","_ref$forceSquare","_ref$xInnerPadding","_ref$xOuterPadding","_ref$yInnerPadding","_ref$yOuterPadding","_ref$sizeVariation","_ref$cellComponent","_ref$opacity","_ref$activeOpacity","_ref$inactiveOpacity","_ref$borderRadius","_ref$borderWidth","_ref$borderColor","_ref$enableGridX","_ref$enableGridY","_ref$axisTop","_ref$axisRight","_ref$axisBottom","_ref$axisLeft","_ref$enableLabels","_ref$label","_ref$labelTextColor","_ref$colors","_ref$emptyColor","_ref$legends","_ref$annotations","_ref$isInteractive","_ref$hoverTarget","_ref$tooltip","role","ariaLabel","ariaLabelledBy","ariaDescribedBy","forwardedRef","_useDimensions","useDimensions","_margin","_innerWidth","innerWidth","_innerHeight","innerHeight","outerWidth","outerHeight","_useHeatMap","top","left","layerById","grid","axes","Grid","Axes","right","bottom","Fragment","legend","index","_createElement","AnchoredContinuousColorsLegendSvg","key","containerWidth","containerHeight","customLayerProps","SvgWrapper","Object","assign","ref","layer","_layerById$layer","HeatMap","forwardRef","_ref2$isInteractive","_ref2$animate","_ref2$motionConfig","renderWrapper","otherProps","_objectWithoutPropertiesLoose","_excluded","Container","ResponsiveHeatMap","defaultWidth","defaultHeight","onResize","debounceResize","props","ResponsiveWrapper","renderRect","ctx","_ref$cell","save","globalAlpha","fillStyle","strokeStyle","lineWidth","fillRect","strokeRect","setCanvasFont","textAlign","textBaseline","drawCanvasText","restore","renderCircle","_ref2$cell","radius","beginPath","arc","PI","InnerHeatMapCanvas","_ref$renderCell","_renderCell","_ref$pixelRatio","canvasEl","useRef","computedAnnotations","useComputedAnnotations","useEffect","getContext","background","translate","line","renderGridLinesToCanvas","axis","renderAxesToCanvas","renderContinuousColorLegendToCanvas","renderAnnotationsToCanvas","handleMouseHover","_getRelativeCursor","getRelativeCursor","find","c","isCursorInRect","mergeRefs","HeatMapCanvas","ResponsiveHeatMapCanvas"],"mappings":"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"}